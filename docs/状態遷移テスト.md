# 状態遷移テスト

## 状態遷移テストとは

## 具体例

### ストップウォッチ

#### 状態遷移表

|                | 初期状態 | 計測中     | 一時停止中 |
| -------------- | -------- | ---------- | ---------- |
| スタートボタン | 計測中   | 一時停止中 | 計測中     |
| リセットボタン |          |            | 初期状態   |

### エアコン

#### 状態遷移図

履歴を考慮しなかった場合

```mermaid
stateDiagram-v2
  [*] --> 停止中
  停止中 --> 運転中: start

  state 運転中 {
    冷房 --> 暖房: switch
    暖房 --> 除湿: switch
    除湿 --> 冷房: switch
  } 

  停止中 --> 停止中: stop
  運転中 --> 運転中: start
```

履歴を条件分岐で表現

```mermaid
stateDiagram-v2
  [*] --> 停止中
  停止中 --> 運転中: start
  運転中 --> 停止中: stop and set history

  state 運転中 {
    state if_state <<choice>>
    [*] --> if_state
    if_state --> 冷房: if history == null or history == 冷房
    if_state --> 暖房: if history == 暖房
    if_state --> 除湿: if history == 除湿
    冷房 --> 暖房: switch
    暖房 --> 除湿: switch
    除湿 --> 冷房: switch
  } 

  停止中 --> 停止中: stop
  運転中 --> 運転中: start
```
