# 状態遷移テスト

## 状態遷移テストとは

## 具体例

### ストップウォッチ

状態遷移表

|                | 初期状態 | 計測中     | 一時停止中 |
| -------------- | -------- | ---------- | ---------- |
| スタートボタン | 計測中   | 一時停止中 | 計測中     |
| リセットボタン |          |            | 初期状態   |

### エアコン

状態遷移図（履歴を考慮しなかった場合）

```mermaid
stateDiagram-v2
  [*] --> 停止中
  停止中 --> 運転中: start

  state 運転中 {
    冷房 --> 暖房: switch
    暖房 --> 除湿: switch
    除湿 --> 冷房: switch
  } 

  停止中 --> 停止中: stop
  運転中 --> 運転中: start
```

状態遷移図（履歴を条件分岐で表現）

```mermaid
stateDiagram-v2
  [*] --> 停止中
  停止中 --> 運転中: start
  運転中 --> 停止中: stop and set history

  state 運転中 {
    state if_state <<choice>>
    [*] --> if_state
    if_state --> 冷房: if history == null or history == 冷房
    if_state --> 暖房: if history == 暖房
    if_state --> 除湿: if history == 除湿
    冷房 --> 暖房: switch
    暖房 --> 除湿: switch
    除湿 --> 冷房: switch
  } 

  停止中 --> 停止中: stop
  運転中 --> 運転中: start
```

### BUG QUEST戦闘中のステータス

状態遷移図

```mermaid
stateDiagram-v2
  通常 --> 睡眠: 昏睡の霧
  通常 --> 石火: メドゥーサの光
  睡眠 --> 石火: メドゥーサの光
  睡眠 --> 睡眠: 昏睡の霧
  石火 --> 石火: メドゥーサの光
  睡眠 --> 通常: 攻撃を受ける or 回復薬 or 超回復薬
  石火 --> 通常: 超回復薬
```

状態遷移表

|                | 通常 | 睡眠 | 石火 |
| -------------- | ---- | ---- | ---- |
| 昏睡の霧       | 睡眠 | N/A  | N/A  |
| メドゥーサの光 | 石火 | 石火 | N/A  |
| 攻撃を受ける   | N/A  | 通常 | N/A  |
| 回復薬         | N/A  | 通常 | N/A  |
| 超回復薬       | N/A  | 通常 | 通常 |

テストケース

| 状態     | アクション             | 結果               |
| -------- | ---------------------- | ------------------ |
| 通常状態 | 昏睡の霧を受ける       | 睡眠状態になること |
| ^        | メドゥーサの光を受ける | 石火状態になること |
| ^        | 攻撃を受ける           | 変化しないこと     |
| ^        | 回復薬を使用する       | ^                  |
| ^        | 超回復薬を使用する     | ^                  |
| 睡眠状態 | 昏睡の霧を受ける       | 変化しないこと     |
| ^        | メドゥーサの光を受ける | 石火状態になること |
| ^        | 攻撃を受ける           | 通常状態になること |
| ^        | 回復薬を使用する       | ^                  |
| ^        | 超回復薬を使用する     | ^                  |
| 石火状態 | 昏睡の霧を受ける       | 変化しないこと     |
| ^        | メドゥーサの光を受ける | ^                  |
| ^        | 攻撃を受ける           | ^                  |
| ^        | 回復薬を使用する       | ^                  |
| ^        | 超回復薬を使用する     | 通常状態になること |
